unchはい、承知いたしました。これまでの議論内容を元に、要件定義書の形でまとめてみます。
これは初期のドラフトとして、今後詳細を詰めていくたたき台としてお使いください。

---

**要件定義書**

**1. はじめに**

*   **プロジェクト名:** （仮称）細菌増殖ローグライクシューター
*   **作成日:** 2023年10月27日 (本日)
*   **作成者:** (あなたの名前/チーム名)
*   **目的:** 本書は、Vercelでの公開を目標としたローグライク2Dシューティングゲーム「（仮称）細菌増殖ローグライクシューター」の開発に必要な要件を定義するものである。

**2. プロジェクト概要**

*   **ゲームコンセプト:** プレイヤーは直接操作できない細菌（大腸菌）の群れを、アップグレードや環境操作を通じて支援し、試験管内で増殖させながら敵性生物を撃退するローグライク・オートシューターゲーム。最終的に画面が細菌で埋め尽くされるカオスな状況を楽しむ。
*   **ターゲットプラットフォーム:** Webブラウザ (Vercelにてホスティング)
*   **ターゲットプレイヤー:** ローグライクゲーム、オートバトルゲーム、Vampire Survivorsライクなゲームが好きなプレイヤー。ユニークなコンセプトに興味を持つプレイヤー。

**3. 機能要件**

    **3.1. コアゲームプレイ**
        3.1.1. **プレイヤーの役割**
            3.1.1.1. ゲーム開始前に細菌の初期配置位置を選択できる。
            3.1.1.2. ラウンドクリア時に提示される3つのランダムなアップグレードの中から1つを選択する。
            3.1.1.3. ゲームプレイ中は基本的に細菌たちの戦いを見守る。
            3.1.1.4. 任意のタイミングで、研究資金を消費して「コマンド入力（環境操作）」を行い、戦局に介入できる。
        3.1.2. **細菌（大腸菌）**
            3.1.2.1. 主人公であり、プレイヤーは直接操作できない。
            3.1.2.2. 種類は1種類（大腸菌）とする。
            3.1.2.3. 各細菌は個別にランダムな方向に移動する。
            3.1.2.4. 各細菌は自身から最も近くにいる敵を自動で攻撃する（弾を発射）。
            3.1.2.5. 時間経過により自動で増殖する。
            3.1.2.6. 各ラウンド開始時の初期細菌数は5匹とする。
            3.1.2.7. プレイヤーが選択したアップグレードは、全ての細菌に一律で適用される。
        3.1.3. **敵（異物）**
            3.1.3.1. 他の種類の微生物や動物などを想定。
            3.1.3.2. 種類ごとに固有の攻撃方法、行動パターン、耐久力を持つ。
            3.1.3.3. ラウンドが進むにつれて、種類、数、能力が強化される。
            3.1.3.4. **特殊な敵（ボス）:**
                3.1.3.4.1. 5ラウンドごと（5, 10, 15ラウンド目）に出現する。
                3.1.3.4.2. 通常の敵より高い耐久力、広範囲攻撃、細菌の増殖を阻害する能力など、固有の強力な能力を持つ。
        3.1.4. **ゲーム進行**
            3.1.4.1. ゲームは全15ラウンドのラウンド制で進行する。
            3.1.4.2. 各ラウンドの目標は、細菌を一定数（例: 200匹、一旦固定）まで増殖させること。
            3.1.4.3. ラウンド目標達成に時間制限はなく、敵の討伐も必須ではない。
            3.1.4.4. 細菌が目標数に到達した時点でラウンドクリアとなる。
            3.1.4.5. ゲームクリア条件は、15ラウンド目をクリアすること。
            3.1.4.6. ゲームオーバー条件は、細菌が全滅すること。
        3.1.5. **アップグレードシステム**
            3.1.5.1. 各ラウンドクリア時に、ランダムな3つのアップグレード選択肢が提示される。
            3.1.5.2. プレイヤーはその中から1つを選択して細菌を強化する。
            3.1.5.3. アップグレードの種類には、攻撃力、攻撃範囲（射程）、増殖速度、細菌の移動速度、弾速、特殊能力（貫通弾、爆発弾など）が含まれる。
            3.1.5.4. ラウンド中に敵を倒した数や質に応じて、提示されるアップグレードの質（効果値の高さ、レアリティ、複数効果の有無など）が向上しやすくなる。
        3.1.6. **コマンド入力システム（環境操作）**
            3.1.6.1. プレイヤーは「研究資金」を消費して、画面右側のボタンからコマンドを実行できる。
            3.1.6.2. コマンドの例: 試験管の温度調整、抗生物質の添加、栄養剤の添加など。
            3.1.6.3. コマンドの効果は、敵の弱体化や細菌の生存環境改善など。
            3.1.6.4. 研究資金はラウンドクリア時に獲得できる。敵を倒すことでも少量獲得できる。
    **3.2. 画面とUI**
        3.2.1. **タイトル画面**
            3.2.1.1. ゲームタイトル、スタートボタンを表示する。
        3.2.2. **ゲームプレイ画面**
            3.2.2.1. 画面中央に正方形の試験管（メインゲームエリア）を配置する。
            3.2.2.2. 画面左側には、ラウンド数、現在の細菌数/目標細菌数、所持研究資金、アップグレード確認ボタンを表示する。
            3.2.2.3. 画面右側には、コマンド入力ボタン一覧を表示する。各ボタンにはコマンド名、消費研究資金を表示する。
        3.2.3. **アップグレード選択画面**
            3.2.3.1. ラウンドクリア後、ゲームプレイ画面上にモーダル表示または専用画面で3つのアップグレード選択肢を提示する。
        3.2.4. **アップグレード情報ポップアップ**
            3.2.4.1. ゲームプレイ画面の「アップグレード確認ボタン」押下、または特定キー入力で、画面手前にポップアップ表示する。
            3.2.4.2. 現在取得しているアップグレードの一覧と効果詳細を表示する。
            3.2.4.3. ポップアップ表示中はゲーム内の時間が停止する。
        3.2.5. **ゲームオーバー画面**
            3.2.5.1. 到達ラウンド数、リトライボタン、タイトルへ戻るボタンを表示する。
        3.2.6. **ゲームクリア画面**
            3.2.6.1. 祝福メッセージ、最終スコア、タイトルへ戻るボタンを表示する。
    **3.3. その他**
        3.3.1. 永続的な強化要素（メタプログレッション）は現時点では導入しない。

**4. 非機能要件**

    **4.1. パフォーマンス**
        4.1.1. Webブラウザ上でスムーズに動作すること。特に細菌の数が増加した際の描画負荷、処理負荷に配慮する。
        4.1.2. Vercelの無料プランで快適に動作する範囲を目指す。
    **4.2. ユーザビリティ**
        4.2.1. 直感的で分かりやすいUIと操作性を提供する。
        4.2.2. ルールや目的がプレイヤーに容易に理解できるようにする。
    **4.3. 開発環境・技術スタック**
        4.3.1. OS: macOS (開発者環境)
        4.3.2. プログラミング言語: TypeScript
        4.3.3. スタイリング: Tailwind CSS
        4.3.4. パッケージマネージャー: pnpm (シングルプロジェクト構成)
        4.3.5. ビルドツール: Vite (推奨)
        4.3.6. ホスティング: Vercel

**5. 将来的な拡張可能性（今回は対象外）**

*   メタプログレッションの導入
*   新しい細菌の種類、敵の種類、アップグレード、コマンドの追加
*   ステージ（試験管の形状や障害物）のバリエーション追加
*   ランキング機能
*   多言語対応

**6. 開発マイルストーン**

*   **マイルストーン 1: 基本ゲームのセットアップ**
    *   TypeScript、Tailwind CSS、pnpm、Vite を使用してプロジェクトをセットアップします。
    *   基本的なゲームループを実装します。
    *   タイトル画面とゲームプレイ画面を実装します。
    *   細菌と敵のクラスを実装します。

*   **マイルストーン 2: コアゲームプレイの仕組み**
    *   プレイヤーの役割（初期細菌の配置、アップグレードの選択、コマンド入力）を実装します。
    *   細菌の移動と攻撃ロジックを実装します。
    *   敵の移動と攻撃ロジックを実装します。
    *   ゲームの進行ロジック（ラウンドシステム、勝敗条件）を実装します。

*   **マイルストーン 3: アップグレードとコマンドシステム**
    *   アップグレードシステム（ランダムなアップグレードの選択、細菌へのアップグレードの適用）を実装します。
    *   コマンド入力システム（研究資金、コマンドの実行、コマンドの効果）を実装します。

*   **マイルストーン 4: UI と仕上げ**
    *   アップグレード選択画面、アップグレード情報ポップアップ、ゲームオーバー画面、ゲームクリア画面を実装します。
    *   サウンドと BGM を追加します。
    *   UI と UX を磨きます。

*   **マイルストーン 5: テストとバグ修正**
    *   ゲームを徹底的にテストし、バグを修正します。
    *   ゲームのパフォーマンスを最適化します。

**7. 未確定事項・今後の検討課題**

*   ゲームの正式タイトル
*   各アップグレード、コマンドの具体的な効果値、コスト、バランス
*   敵の具体的な種類、ステータス、行動パターン、出現ロジック
*   ボスの具体的な能力、攻撃パターン
*   細菌の目標数（ラウンドごと、または全体固定）の最終決定
*   研究資金の獲得量と消費量のバランス
*   使用するゲームエンジンまたは描画ライブラリの最終決定
*   サウンド、BGMの有無と方向性
*   グラフィックの具体的なテイスト（ピクセルアート、ベクターアートなど）
*   詳細なUIデザイン、UXフロー

---
